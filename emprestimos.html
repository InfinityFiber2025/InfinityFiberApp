<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EmprÃ©stimos â€¢ Infinity Fiber</title>
  <link rel="stylesheet" href="style.css"><script defer src="script.js"></script>
</head>
<body onload="ensureAuth()">
  <div class="wrapper">
    <div class="card">
      <div class="toolbar">
        <h1>ðŸ’¼ EmprÃ©stimos</h1>
        <a class="btn secondary" href="home.html">Voltar</a>
      </div>
      <label>Valor desejado</label><input id="valor" type="number" min="0" step="0.01">
      <label>Prazo (meses)</label><input id="prazo" type="number" min="1" step="1" value="12">
      <div class="small">Juros simulados: 2% a.m.</div>
      <button class="btn" onclick="simular()">Simular</button>
      <div id="res" class="small" style="margin-top:8px"></div>
      <div class="toolbar"><button class="btn" id="contratar" onclick="contratar()" disabled>Contratar</button></div>
    </div>
  </div>
<script>
  let L=null;
  function simular(){
    const v=parseFloat(byId('valor').value||'0'); const n=parseInt(byId('prazo').value||'12');
    if(v<=0||n<=0){alert('Informe valor e prazo.');return;}
    const i=0.02; const pmt=(v*i)/(1-Math.pow(1+i,-n)); L={v,n,pmt};
    byId('res').textContent = 'Parcelas: '+n+' de '+fmtBRL(pmt)+' â€¢ Total: '+fmtBRL(pmt*n);
    byId('contratar').disabled=false;
  }
  function contratar(){
    if(!L) return;
    pushMov('CrÃ©dito','LiberaÃ§Ã£o de emprÃ©stimo', L.v);
    notify('EmprÃ©stimo contratado: '+L.n+'x de '+fmtBRL(L.pmt));
    alert('EmprÃ©stimo liberado e creditado.'); go('saldo.html');
  }
</script>
</body>
</html>
