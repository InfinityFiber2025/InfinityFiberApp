<!DOCTYPE html>

<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1, viewport-fit=cover" name="viewport"/>
<title>Infinity Fiber â€” VersÃ£o 1b</title>
<!-- TailwindCSS -->
<script src="https://cdn.tailwindcss.com"></script>
<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0f172a">
</head>
<body class="bg-slate-950 text-slate-100 min-h-screen flex flex-col">
<!-- LOGIN -->
<div class="flex-1 flex items-center justify-center p-6" id="login">
<div class="w-full max-w-sm bg-slate-900/80 rounded-2xl p-6 shadow-xl">
<div class="flex flex-col items-center mb-6">
<!-- Logo infinito -->
<svg class="drop-shadow mb-2" height="56" viewbox="0 0 64 32" width="56">
<defs>
<lineargradient id="g" x1="0" x2="64" y1="0" y2="32">
<stop offset="0%" stop-color="#22d3ee"></stop>
<stop offset="100%" stop-color="#6366f1"></stop>
</lineargradient>
</defs>
<path d="M50 24c-8 0-12-16-18-16S22 24 14 24C7 24 2 19 2 12S7 0 14 0c8 0 12 16 18 16S42 0 50 0c7 0 12 5 12 12s-5 12-12 12Z" fill="url(#g)" opacity="0.30"></path>
<path d="M14 22c-5 0-9-4-9-10s4-10 9-10c8 0 12 16 18 16S48 2 50 2c5 0 9 4 9 10s-4 10-9 10c-6 0-10-5-18-10-8 5-12 10-18 10Z" fill="none" stroke="url(#g)" stroke-linecap="round" stroke-width="2"></path>
</svg>
<h1 class="text-lg font-bold">Infinity Fiber</h1>
<p class="text-xs text-slate-400">GestÃ£o de Pagamento â€¢ Mobile</p>
</div>
<label class="text-xs">UsuÃ¡rio</label>
<input class="w-full mt-1 mb-3 px-4 py-2 rounded-lg bg-slate-800 text-slate-100 outline-none" id="u" placeholder="DanielKascher"/>
<label class="text-xs">Senha</label>
<input autocomplete="off" class="w-full mt-1 mb-4 px-4 py-2 rounded-lg bg-slate-800 text-slate-100 outline-none" id="p" placeholder="Digite aqui..." type="password"/>
<button class="w-full py-2 rounded-lg bg-gradient-to-r from-cyan-500 to-indigo-500 font-semibold" onclick="doLogin()">Entrar</button>
<p class="text-red-400 text-xs mt-2 hidden" id="le">UsuÃ¡rio ou senha invÃ¡lidos.</p>
<p class="text-[11px] text-slate-500 mt-3">Use <b>DanielKascher</b> / <b>K@scher123</b></p>
</div>
</div>
<!-- APP -->
<div class="hidden flex-1 flex flex-col" id="app">
<!-- Topbar compacta -->
<header class="px-4 py-3 border-b border-white/10 bg-slate-950/90 backdrop-blur flex items-center gap-3">
<svg height="26" viewbox="0 0 64 32" width="26">
<defs>
<lineargradient id="g2" x1="0" x2="64" y1="0" y2="32">
<stop offset="0%" stop-color="#22d3ee"></stop>
<stop offset="100%" stop-color="#6366f1"></stop>
</lineargradient>
</defs>
<path d="M50 24c-8 0-12-16-18-16S22 24 14 24C7 24 2 19 2 12S7 0 14 0c8 0 12 16 18 16S42 0 50 0c7 0 12 5 12 12s-5 12-12 12Z" fill="url(#g2)" opacity="0.35"></path>
<path d="M14 22c-5 0-9-4-9-10s4-10 9-10c8 0 12 16 18 16S48 2 50 2c5 0 9 4 9 10s-4 10-9 10c-6 0-10-5-18-10-8 5-12 10-18 10Z" fill="none" stroke="url(#g2)" stroke-linecap="round" stroke-width="2"></path>
</svg>
<div class="flex flex-col">
<span class="text-[10px] uppercase text-slate-400">Infinity Fiber</span>
<span class="text-sm font-semibold">GestÃ£o de Pagamento</span>
</div>
<div class="ml-auto text-right text-xs">
<div>Saldo</div>
<div class="text-base font-bold text-cyan-300 valorFinanceiro" data-valor="R$ 37,743,623,000">****</div>
</div>
</header>
<!-- ConteÃºdo -->
<main class="flex-1 overflow-y-auto pb-24" id="content">
<section class="p-4 space-y-3" id="t-saldo">
<div class="rounded-xl bg-slate-900/60 p-4 shadow text-slate-100">
<h2 class="text-lg font-semibold mb-2">Minha Conta</h2>
<p class="text-sm mb-2">Saldo disponÃ­vel:</p>
<p class="valorFinanceiro text-2xl font-bold" id="valorSaldo">****</p>
<button class="btnToggleValor mt-2 py-2 px-4 bg-gradient-to-r from-cyan-500 to-indigo-500 rounded-lg text-white" onclick="toggleValores()">ğŸ‘ Mostrar Valores</button>
</div>
</section>
<!-- Telas -->
<section class="p-4 space-y-3" id="t-home">
<div class="rounded-2xl p-5 bg-gradient-to-r from-cyan-500 to-indigo-600 shadow">
<div class="text-xs">Saldo disponÃ­vel</div>
<div class="text-2xl font-extrabold valorFinanceiro" data-valor="R$ 37,743,623,000">****</div>
</div>
<div class="grid grid-cols-2 gap-3">
<button class="rounded-xl p-4 bg-slate-900/60 text-left shadow" onclick="nav('t-visaogeral')"><div class="text-sm font-semibold">VisÃ£o Geral</div><div class="text-[11px] text-slate-400">Fundo e grÃ¡ficos</div></button>
<button class="rounded-xl p-4 bg-slate-900/60 text-left shadow" onclick="nav('t-repasse')"><div class="text-sm font-semibold">Repasse</div><div class="text-[11px] text-slate-400">Split e ordens</div></button>
<button class="rounded-xl p-4 bg-slate-900/60 text-left shadow" onclick="nav('t-reembolsos')"><div class="text-sm font-semibold">Reembolsos</div><div class="text-[11px] text-slate-400">Entradas &amp; saÃ­das</div></button>
<button class="rounded-xl p-4 bg-slate-900/60 text-left shadow" onclick="nav('t-pagamentos')"><div class="text-sm font-semibold">Pagamentos</div><div class="text-[11px] text-slate-400">Clientes &amp; fornecedores</div></button>
<button class="rounded-xl p-4 bg-slate-900/60 text-left shadow" onclick="openModal('m-gateway')"><div class="text-sm font-semibold">Gateway BancÃ¡rio</div><div class="text-[11px] text-slate-400">Ambiente seguro</div></button>
<button class="rounded-xl p-4 bg-slate-900/60 text-left shadow" onclick="openModal('m-ativo')"><div class="text-sm font-semibold">TransferÃªncia de Ativo</div><div class="text-[11px] text-slate-400">Assinatura digital</div></button>
<button class="rounded-xl p-4 bg-slate-900/60 text-left shadow" onclick="nav('t-impostos')"><div class="text-sm font-semibold">Impostos</div><div class="text-[11px] text-slate-400">Tributos &amp; encargos</div></button>
<button class="rounded-xl p-4 bg-slate-900/60 text-left shadow" onclick="nav('t-beneficios')"><div class="text-sm font-semibold">BenefÃ­cios</div><div class="text-[11px] text-slate-400">CartÃ£o &amp; vantagens</div></button>
</div>
</section>
<section class="hidden p-4 space-y-3" id="t-visaogeral">
<div class="rounded-xl bg-slate-900/60 p-4 shadow">
<div class="text-sm font-semibold mb-1">Total do Fundo</div>
<div class="text-lg font-bold">R$ 44,200,000,000</div>
<button class="text-xs text-cyan-300 mt-2" onclick="toggle('op-list')">Ver Operadoras</button>
<ul class="hidden text-xs mt-2 space-y-1 text-slate-300" id="op-list">
<li>VIVO â€” R$ 24,200,000,000</li>
<li>CLARO â€” R$ 8,000,000,000</li>
<li>TIM â€” R$ 12,000,000,000</li>
</ul>
</div>
<div class="rounded-xl bg-slate-900/60 p-4 shadow">
<div class="text-sm font-semibold mb-2">GrÃ¡fico: DistribuiÃ§Ã£o por Operadora</div>
<div style="max-width:300px;margin:auto;"><canvas height="140" id="c-op"></canvas></div>
</div>
<div class="rounded-xl bg-slate-900/60 p-4 shadow">
<div class="text-sm font-semibold mb-2">GrÃ¡fico: Percentuais de Repasse</div>
<div style="max-width:300px;margin:auto;"><canvas height="140" id="c-rp"></canvas></div>
</div>
</section>
<section class="hidden p-4 space-y-3" id="t-repasse">
<div class="rounded-xl bg-slate-900/60 p-4 shadow">
<div class="text-sm font-semibold">Valores a repassar</div>
<ul class="text-xs mt-2 space-y-1">
<li>ANATEL â€” R$ 1,679,600,000</li>
<li>OI S.A. â€” R$ 1,193,400,000</li>
<li>Reserva de Credores â€” R$ 3,536,000,000</li>
</ul>
<div class="text-xs text-slate-400 mt-2">Saldo lÃ­quido IF: <b class="text-cyan-300">R$ 37,791,000,000</b></div>
<div class="grid grid-cols-2 gap-2 mt-3">
<button class="rounded-lg py-2 bg-gradient-to-r from-cyan-500 to-indigo-500 text-sm font-semibold" onclick="gerarOrdem()">Gerar Ordem</button>
<button class="rounded-lg py-2 bg-white/10 text-sm font-semibold" onclick="exportarPDF()">Exportar PDF</button>
</div>
</div>
</section>
<section class="hidden p-4 space-y-3" id="t-reembolsos">
<div class="rounded-xl bg-slate-900/60 p-4 shadow">
<div class="text-sm font-semibold mb-1">Reembolsos de Terceiros</div>
<div class="text-xs text-slate-400">DepÃ³sito ANATEL: <b class="text-slate-200">R$ 47,400,000</b></div>
<ul class="text-xs mt-2 space-y-1">
<li>Daniel â€” R$ 13,000,000</li>
<li>Reembolso de Impostos â€” R$ 877,000</li>
<li>Reembolso JPMorgan â€” R$ 1,300,000</li>
<li>DiferenÃ§a de saldo â€” R$ 32,200,000</li>
</ul>
<div class="text-xs text-slate-400 mt-2">Saldo Final IF: <b class="text-cyan-300 valorFinanceiro" data-valor="R$ 37,743,623,000">****</b></div>
</div>
</section>
<section class="hidden p-4 space-y-3" id="t-pagamentos">
<div class="rounded-xl bg-slate-900/60 p-4 shadow">
<div class="text-sm font-semibold mb-2">Acesso de Clientes &amp; Fornecedores</div>
<input class="w-full px-3 py-2 rounded-lg bg-slate-800 text-xs mb-2" placeholder="Nome/RazÃ£o Social"/>
<input class="w-full px-3 py-2 rounded-lg bg-slate-800 text-xs mb-2" placeholder="E-mail" type="email"/>
<input class="w-full px-3 py-2 rounded-lg bg-slate-800 text-xs mb-2" placeholder="CNPJ/CPF"/>
<div class="grid grid-cols-2 gap-2">
<input class="px-3 py-2 rounded-lg bg-slate-800 text-xs" placeholder="UsuÃ¡rio"/>
<input autocomplete="off" class="px-3 py-2 rounded-lg bg-slate-800 text-xs" placeholder="Digite aqui..." type="password"/>
</div>
<button class="mt-3 w-full rounded-lg py-2 bg-gradient-to-r from-cyan-500 to-indigo-500 text-sm font-semibold" onclick="alert('Cadastro enviado para anÃ¡lise.');">Cadastrar Acesso</button>
</div>
<div class="rounded-xl bg-slate-900/60 p-4 shadow">
<div class="text-sm font-semibold mb-2">Regras para estar apto a receber</div>
<ul class="text-xs space-y-1">
<li>CertidÃµes Negativas (Federal, Estadual, Municipal)</li>
<li>Regularidade Trabalhista (FGTS, GFIP, eSocial)</li>
<li>Regularidade Fiscal (Receita, INSS)</li>
<li>PLD/FT (Lei 9.613/1998) â€” validaÃ§Ã£o KYC e listas de sanÃ§Ãµes</li>
<li>Sem restriÃ§Ãµes (Serasa, SPC, BacenJud)</li>
<li>Assinatura eletrÃ´nica de contrato</li>
<li>Capacidade tÃ©cnica comprovada e dados bancÃ¡rios vÃ¡lidos</li>
</ul>
</div>
</section>
<section class="hidden p-4 space-y-3" id="t-impostos">
<div class="rounded-xl bg-slate-900/60 p-4 shadow">
<div class="text-sm font-semibold mb-2">Tributos e Encargos (Telecom)</div>
<ul class="text-xs space-y-1">
<li><b>Federais:</b> IRPJ, CSLL, PIS, COFINS, CIDE</li>
<li><b>Estaduais:</b> ICMS (com regras especÃ­ficas para telecom)</li>
<li><b>Municipais:</b> ISS</li>
<li><b>Trabalhistas/PrevidenciÃ¡rios:</b> FGTS, INSS Patronal, eSocial/GFIP</li>
<li><b>Fundos Setoriais:</b> FUST, FUNTTEL</li>
<li><b>ContribuiÃ§Ãµes:</b> Sistema S (SENAI, SENAC, etc.)</li>
</ul>
<p class="text-[11px] text-slate-400 mt-2">ObservaÃ§Ã£o: a incidÃªncia e alÃ­quotas podem variar conforme regime tributÃ¡rio e legislaÃ§Ã£o vigente do estado/municÃ­pio.</p>
</div>
</section>
<section class="hidden p-4 space-y-3" id="t-beneficios">
<div class="rounded-xl bg-slate-900/60 p-4 shadow">
<div class="text-sm font-semibold mb-2">BenefÃ­cios Infinity Fiber</div>
<ul class="text-xs space-y-1">
<li><b>CartÃ£o Infinity</b>: dÃ©bito e crÃ©dito com controle no app</li>
<li><b>Programa de Vantagens</b>: cashback e descontos em parceiros</li>
<li><b>Open Finance</b>: trazer saldos e extratos de outras contas</li>
<li><b>Pagamentos AutomÃ¡ticos</b>: contas de consumo e serviÃ§os</li>
<li><b>ServiÃ§os</b>: seguros (celular, viagem), assistÃªncias e saÃºde</li>
</ul>
<button class="mt-3 w-full rounded-lg py-2 bg-gradient-to-r from-emerald-500 to-green-600 text-sm font-semibold" onclick="alert('SolicitaÃ§Ã£o de cartÃ£o enviada.')">Solicitar CartÃ£o Infinity</button>
</div>
</section>
<section class="hidden p-4 space-y-3" id="t-contrato">
<div class="rounded-xl bg-slate-900/60 p-4 shadow text-slate-100">
<h2 class="text-lg font-semibold mb-2">Contrato de Conta Digital</h2>
<p class="text-sm mb-2">SimulaÃ§Ã£o de contrato com clÃ¡usulas e tarifas mÃ©dias praticadas no mercado.</p>
<textarea class="w-full h-80 p-3 rounded bg-slate-800 text-xs mb-3" readonly="">CONTRATO DE PRESTAÃ‡ÃƒO DE SERVIÃ‡OS DE CONTA DIGITAL

Pelo presente instrumento particular, de um lado:
Infinity Fiber Ltda., inscrita no CNPJ sob nÂº 28.430.524/0001-31, com sede na Rua do MÃ©xico, 31 â€” Centro, Rio de Janeiro/RJ, doravante denominada CONTRATADA;

E, de outro lado:
[NOME_DO_CLIENTE], inscrito no CPF/CNPJ sob nÂº [CPF_DO_CLIENTE], residente/sediado em [ENDERECO_DO_CLIENTE], doravante denominado CONTRATANTE;

ClÃ¡usula 1Âª â€” Objeto
PrestaÃ§Ã£o de serviÃ§os de conta digital, com pacotes de tarifas conforme simulaÃ§Ã£o abaixo.

ClÃ¡usula 2Âª â€” Pacotes e Tarifas
- Pacote BÃ¡sico: R$ 0,00/mÃªs â€” PIX ilimitado, consultas de saldo grÃ¡tis.
- Pacote IntermediÃ¡rio: R$ 19,90/mÃªs â€” inclui 10 TEDs/boletos grÃ¡tis por mÃªs.
- Pacote Premium: R$ 39,90/mÃªs â€” TEDs/boletos ilimitados, cartÃ£o fÃ­sico incluso.
- ManutenÃ§Ã£o de Conta: R$ 12,90/mÃªs (isenta no pacote Premium).

ClÃ¡usula 3Âª â€” ObrigaÃ§Ãµes da CONTRATADA
a) Cumprir requisitos regulatÃ³rios (BACEN, ANATEL, LGPD);
b) Garantir infraestrutura segura;
c) Divulgar periodicamente tabela de tarifas.

ClÃ¡usula 4Âª â€” ObrigaÃ§Ãµes do CONTRATANTE
a) Fornecer informaÃ§Ãµes corretas;
b) Efetuar pagamentos das tarifas e serviÃ§os contratados;
c) Manter uso lÃ­cito da conta.

ClÃ¡usula 5Âª â€” MovimentaÃ§Ã£o Financeira
ServiÃ§os incluem pagamentos, transferÃªncias e recebimentos, sujeitos a limites de seguranÃ§a.

ClÃ¡usula 6Âª â€” SeguranÃ§a e AutenticaÃ§Ã£o
OperaÃ§Ãµes devem ser confirmadas por senha, token, biometria ou meio equivalente. O CONTRATANTE Ã© responsÃ¡vel por suas credenciais.

ClÃ¡usula 7Âª â€” Encerramento de Conta
A conta poderÃ¡ ser encerrada a pedido do CONTRATANTE ou pela CONTRATADA em casos de descumprimento contratual, inatividade ou ordem legal. Saldos serÃ£o devolvidos em atÃ© 10 (dez) dias Ãºteis.

ClÃ¡usula 8Âª â€” Atendimento e Suporte
Suporte via canais digitais da CONTRATADA em horÃ¡rio comercial; bloqueios emergenciais disponÃ­veis 24h/dia.

ClÃ¡usula 9Âª â€” Foro
Fica eleito o foro da Comarca do Rio de Janeiro/RJ.

E por estarem de pleno acordo, firmam o presente instrumento.
-------------------------------------------------
Infinity Fiber Ltda. â€” CONTRATADA
-------------------------------------------------
[NOME_DO_CLIENTE] â€” CONTRATANTE</textarea>
<div class="flex items-center space-x-2 mb-3">
<input id="chkContrato2" type="checkbox"/>
<label class="text-sm" for="chkContrato2">Li e aceito os termos do contrato</label>
</div>
<button class="hidden w-full py-2 bg-gradient-to-r from-cyan-500 to-indigo-500 rounded-lg text-white" id="btnPdf2" onclick="gerarContratoPDF2()">Baixar Contrato em PDF</button>
</div>
</section>
<section class="hidden p-4 space-y-3" id="t-restrito">
<div class="rounded-xl bg-red-900/60 p-4 shadow text-slate-100">
<h2 class="text-lg font-semibold mb-2">Ãrea de Acesso Restrito</h2>
<p class="text-sm mb-3">Somente administradores podem conceder permissÃµes para gestores e usuÃ¡rios.</p>
<div id="restrito-content">
<h3 class="font-semibold mb-2">Gerenciar UsuÃ¡rios</h3>
<p class="text-sm mb-2">Somente administradores podem atribuir permissÃµes.</p>
<table class="w-full text-sm border border-slate-700">
<thead class="bg-slate-800">
<tr>
<th class="p-2 text-left">UsuÃ¡rio</th>
<th class="p-2 text-left">NÃ­vel</th>
</tr>
</thead>
<tbody class="divide-y divide-slate-700" id="usuariosLista">
<tr>
<td class="p-2">JoÃ£o</td>
<td class="p-2">
<select class="nivelSelect w-full p-1 rounded bg-slate-900 text-white" data-user="joao">
<option value="user">UsuÃ¡rio</option>
<option value="gestor">Gestor</option>
<option value="admin">Admin</option>
</select>
</td>
</tr>
<tr>
<td class="p-2">Maria</td>
<td class="p-2">
<select class="nivelSelect w-full p-1 rounded bg-slate-900 text-white" data-user="maria">
<option value="user">UsuÃ¡rio</option>
<option value="gestor">Gestor</option>
<option value="admin">Admin</option>
</select>
</td>
</tr>
<tr>
<td class="p-2">Pedro</td>
<td class="p-2">
<select class="nivelSelect w-full p-1 rounded bg-slate-900 text-white" data-user="pedro">
<option value="user">UsuÃ¡rio</option>
<option value="gestor">Gestor</option>
<option value="admin">Admin</option>
</select>
</td>
</tr>
</tbody>
</table>
<button class="w-full mt-3 py-2 bg-gradient-to-r from-cyan-500 to-indigo-500 rounded-lg text-white" onclick="salvarPermissoes()">Salvar PermissÃµes</button>
</div>
</div>
</section>

<section class="hidden p-4 space-y-3" id="t-ciclos">
  <div class="rounded-xl bg-slate-900/60 p-4 shadow text-slate-100">
    <h2 class="text-lg font-semibold mb-2">Ciclos de Pagamento</h2>
    <p class="text-sm mb-1"><b>Valor:</b> R$ 4,3 BilhÃµes</p>
    <p class="text-sm"><b>Data:</b> 16/09/2025</p>
  </div>
</section>


<section class="hidden p-4 space-y-3" id="t-facial">
  <div class="rounded-xl bg-slate-900/60 p-4 shadow text-slate-100">
    <h2 class="text-lg font-semibold mb-2">MÃ³dulo ObrigatÃ³rio Facial</h2>
    <p class="text-sm mb-4">âš ï¸ Para liberar do saldo em conta para transferÃªncia e movimentaÃ§Ãµes â€” incluindo transferÃªncia para agÃªncia e conta de terceiro â€” Ã© obrigatÃ³ria a leitura facial.</p>
    
    
<label class="w-full">
  <input type="file" accept="image/*" capture="user" id="selfieInput" style="display:none">
  <button type="button" class="w-full py-2 mb-2 bg-emerald-600 rounded-lg text-white">ğŸ“¸ Cadastro Selfie</button>
</label>

    
<label class="w-full">
  <input type="file" accept="image/*" capture="user" id="facialCheckInput" style="display:none">
  <button type="button" class="w-full py-2 bg-blue-600 rounded-lg text-white">ğŸ‘ Executar Leitura Facial</button>
</label>

    
    <p class="text-xs text-slate-400 mt-3">Este Ã© um ambiente de simulaÃ§Ã£o local â€” nenhuma foto Ã© enviada ao servidor.</p>
  </div>
</section>

<main id=\"integracao-bancaria\" class=\"hidden\" class="hidden max-w-6xl mx-auto mt-6 px-3">
    <header class="mb-4">
      <h2 class="text-xl font-semibold">IntegraÃ§Ã£o BancÃ¡ria â€” Importado</h2>
      <p class="text-sm text-white/60">MÃ³dulos: Gateway, Contratos, Contas com permissÃ£o, Atendimento IA</p>
    </header>

    <!-- Abas (conteÃºdo) -->
    <div id="aba-home" class="p-4 rounded-2xl glass">
      <h3 class="text-lg font-semibold mb-2">InÃ­cio</h3>
      <p class="text-white/80">Bem-vindo ao ambiente de testes. Use o menu inferior para navegar.</p>
      <div class="mt-4 grid sm:grid-cols-2 gap-4">
        <div class="p-4 rounded-xl bg-slate-800/50 border border-white/10">
          <div class="text-sm text-white/70">Saldo disponÃ­vel</div>
          <div class="mt-1 text-2xl font-semibold valorFinanceiro" data-valor="R$ 37.743.623.000">****</div>
          <button class="mt-3 px-3 py-1.5 rounded bg-slate-700 hover:bg-slate-600 btnToggleValor" onclick="toggleValores()">ğŸ‘ Mostrar Valores</button>
        </div>
        <div class="p-4 rounded-xl bg-slate-800/50 border border-white/10">
          <div class="text-sm text-white/70">Atalhos</div>
          <div class="mt-2 flex gap-2 flex-wrap">
            <button class="px-3 py-1.5 rounded bg-sky-700 hover:bg-sky-600" onclick="openModal('modal-gateway')">Ir para Gateway</button>
            <button class="px-3 py-1.5 rounded bg-teal-700 hover:bg-teal-600" onclick="openModal('modal-contas')">Contas com permissÃ£o</button>
            <button class="px-3 py-1.5 rounded bg-indigo-700 hover:bg-indigo-600" onclick="openModal('modal-ia')">Atendimento IA</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Gateway BancÃ¡rio -->
    <div id="aba-gateway" class="hidden p-4 rounded-2xl glass">
      <h3 class="text-lg font-semibold mb-3">Gateway BancÃ¡rio</h3>
      <div class="grid md:grid-cols-2 gap-4">
        <form id="form-transfer" class="p-4 rounded-xl bg-slate-800/50 border border-white/10 grid gap-3" onsubmit="enviarTransferenciaGuardada(event)">
          <div class="grid gap-1">
            <label class="text-sm">Valor</label>
            <input id="tx-valor" type="number" step="0.01" min="0" class="px-3 py-2 rounded bg-slate-800 text-white border border-white/10" placeholder="0,00" required="">
          </div>

          <div class="grid gap-1">
            <label class="text-sm">Destino (somente contas com permissÃ£o)</label>
            <select id="beneficiarioSelect" class="w-full px-3 py-2 rounded bg-slate-800 text-white border border-white/10" disabled=""><option value="">Cadastre contas com permissÃ£o na aba correspondente</option></select>
            <p class="text-xs text-white/60">Cadastre atÃ© 3 contas na aba â€œContas permissÃ£o para transferÃªnciaâ€.</p>
          </div>

          <div class="grid md:grid-cols-3 gap-3">
            <div>
              <label class="text-sm">Banco</label>
              <input id="dest-banco" class="w-full px-3 py-2 rounded bg-slate-900 text-white border border-white/10" readonly="">
            </div>
            <div>
              <label class="text-sm">AgÃªncia</label>
              <input id="dest-agencia" class="w-full px-3 py-2 rounded bg-slate-900 text-white border border-white/10" readonly="">
            </div>
            <div>
              <label class="text-sm">Conta</label>
              <input id="dest-conta" class="w-full px-3 py-2 rounded bg-slate-900 text-white border border-white/10" readonly="">
            </div>
          </div>
          <div class="grid gap-1">
            <label class="text-sm">CPF do destinatÃ¡rio</label>
            <input id="dest-cpf" class="w-full px-3 py-2 rounded bg-slate-900 text-white border border-white/10" readonly="">
          </div>

          <div class="flex items-center gap-3">
            <button class="px-4 py-2 rounded bg-emerald-600 hover:bg-emerald-500">Transferir</button>
            <button type="button" class="px-4 py-2 rounded bg-slate-700 hover:bg-slate-600" onclick="abrirAjudaIA(&#39;transferÃªncia&#39;)">Ajuda</button>
          </div>
        </form>

        <div class="p-4 rounded-xl bg-slate-800/50 border border-white/10">
          <h4 class="font-medium mb-2">Regras de seguranÃ§a</h4>
          <ul class="list-disc pl-5 text-sm text-white/80 space-y-1">
            <li>Somente contas previamente cadastradas poderÃ£o receber transferÃªncias.</li>
            <li>ValidaÃ§Ã£o de CPF e registro de hash do comprovante de residÃªncia.</li>
            <li>Logs e auditoria recomendados no backend (IP, usuÃ¡rio, timestamp).</li>
          </ul>
          <div class="mt-4">
            <button class="px-3 py-1.5 rounded bg-slate-700 hover:bg-slate-600 text-sm" onclick="openModal('modal-contas')">Cadastrar contas com permissÃ£o</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Contas com permissÃ£o para transferÃªncia (atÃ© 3) -->
    </div>

      <hr class="my-4 border-white/10">

      <form id="form-beneficiario" class="grid gap-3 max-w-2xl" onsubmit="salvarBeneficiario(event)">
        <h4 class="font-medium">Cadastrar nova conta com permissÃ£o</h4>

        <div class="grid md:grid-cols-2 gap-3">
          <div>
            <label class="text-sm">Nome completo</label>
            <input id="b-nome" class="w-full px-3 py-2 rounded bg-slate-800 text-white border border-white/10" required="">
          </div>
          <div>
            <label class="text-sm">CPF</label>
            <input id="b-cpf" class="w-full px-3 py-2 rounded bg-slate-800 text-white border border-white/10" placeholder="000.000.000-00" required="">
          </div>
          <div>
            <label class="text-sm">Identidade (RG)</label>
            <input id="b-rg" class="w-full px-3 py-2 rounded bg-slate-800 text-white border border-white/10" required="">
          </div>
          <div>
            <label class="text-sm">EndereÃ§o</label>
            <input id="b-end" class="w-full px-3 py-2 rounded bg-slate-800 text-white border border-white/10" required="">
          </div>
        </div>

        <div class="grid md:grid-cols-3 gap-3">
          <div>
            <label class="text-sm">Banco</label>
            <input id="b-banco" class="w-full px-3 py-2 rounded bg-slate-800 text-white border border-white/10" placeholder="Ex.: 237 - Bradesco" required="">
          </div>
          <div>
            <label class="text-sm">AgÃªncia</label>
            <input id="b-agencia" class="w-full px-3 py-2 rounded bg-slate-800 text-white border border-white/10" required="">
          </div>
          <div>
            <label class="text-sm">Conta</label>
            <input id="b-conta" class="w-full px-3 py-2 rounded bg-slate-800 text-white border border-white/10" required="">
          </div>
        </div>

        <div class="grid gap-2">
          <label class="text-sm">Comprovante de residÃªncia (PDF/JPG/PNG)</label>
          <input id="b-anexo" type="file" accept=".pdf,image/*" class="w-full text-sm file:mr-2 file:px-3 file:py-1.5 file:rounded file:border-0 file:bg-slate-700 file:text-white">
          <p class="text-xs text-white/60">O arquivo fica local nesta sessÃ£o; salvamos hash/metadata. Em produÃ§Ã£o, envie ao servidor.</p>
          <div id="b-preview" class="text-sm text-white/80"></div>
        </div>

        <div class="flex flex-wrap items-center gap-3">
          <button id="btn-add-benef" class="px-4 py-2 rounded bg-emerald-600 hover:bg-emerald-500 disabled:opacity-50">Salvar &amp; Novo</button>
          <button type="button" onclick="salvarBeneficiarioSimples()" class="px-4 py-2 rounded bg-sky-600 hover:bg-sky-500">Salvar</button>
          <button type="button" onclick="exportarBeneficiariosJSON()" class="px-4 py-2 rounded bg-slate-700 hover:bg-slate-600">Exportar JSON</button>
          <button type="button" onclick="exportarBeneficiariosCSV()" class="px-4 py-2 rounded bg-slate-700 hover:bg-slate-600">Exportar CSV</button>
          <label class="ml-auto text-sm flex items-center gap-2 cursor-pointer">
            <span class="px-3 py-2 rounded bg-slate-700 hover:bg-slate-600">Importar JSON</span>
            <input id="import-json" type="file" accept="application/json" class="hidden" onchange="importarBeneficiariosJSON(this)">
          </label>
          <span id="limite-msg" class="text-sm text-white/70"></span>
        </div>
      </form>
    </div>

    <!-- Atendimento IA -->
    
      </div>

      <div class="grid md:grid-cols-2 gap-3">
        <div class="grid gap-2">
          <label class="text-sm">Buscar dÃºvida</label>
          <input id="ia-busca" class="px-3 py-2 rounded bg-slate-800 text-white border border-white/10" placeholder="Digite palavras-chave (ex.: cadastro, facial, contrato)" oninput="iaBuscar()">
          <div class="text-xs text-white/60">A busca considera tÃ­tulo, pergunta, resposta e tags.</div>
        </div>
        <div class="grid gap-2">
          <label class="text-sm">Filtrar por tag</label>
          <input id="ia-tag" class="px-3 py-2 rounded bg-slate-800 text-white border border-white/10" placeholder="Ex.: seguranÃ§a, gateway, contrato" oninput="iaBuscar()">
          <div class="text-xs text-white/60">Use uma tag por vez para filtrar.</div>
        </div>
      </div>

      <div id="ia-resultados" class="grid gap-3"><div class="rounded-xl border border-white/10 p-3 bg-slate-800/50">
        <div class="flex justify-between items-start gap-3">
          <div>
            <div class="font-medium">Cadastro â†’ Contrato automÃ¡tico</div>
            <div class="text-sm text-white/80 mt-1">Como o cadastro preenche o contrato de forma automÃ¡tica?</div>
            <div class="text-sm text-white/90 mt-2">Ao finalizar o formulÃ¡rio de cadastro, os campos sÃ£o mapeados para placeholders do contrato e geramos o PDF final com os dados validados (CPF, RG, endereÃ§o).</div>
            <div class="text-xs text-white/50 mt-2">Tags: cadastro, contrato, pdf Â· 10/09/2025, 16:44:46</div>
          </div>
          <div class="flex flex-col gap-2">
            <button class="px-2 py-1 rounded bg-slate-700 hover:bg-slate-600 text-sm" onclick="iaEditar(&#39;419675c2-8469-42e3-a584-bed2f2643c65&#39;)">Editar</button>
            <button class="px-2 py-1 rounded bg-red-600/80 hover:bg-red-500 text-sm" onclick="iaRemover(&#39;419675c2-8469-42e3-a584-bed2f2643c65&#39;)">Remover</button>
          </div>
        </div>
      </div><div class="rounded-xl border border-white/10 p-3 bg-slate-800/50">
        <div class="flex justify-between items-start gap-3">
          <div>
            <div class="font-medium">Gateway: transferÃªncia apenas para contas permitidas</div>
            <div class="text-sm text-white/80 mt-1">Como restringir transferÃªncia para contas nÃ£o autorizadas?</div>
            <div class="text-sm text-white/90 mt-2">Use a aba â€˜Contas permissÃ£o para transferÃªnciaâ€™ para cadastrar atÃ© 3 contas. O Gateway valida o destino contra essa whitelist antes de enviar.</div>
            <div class="text-xs text-white/50 mt-2">Tags: gateway, seguranÃ§a, transferÃªncia Â· 10/09/2025, 16:44:46</div>
          </div>
          <div class="flex flex-col gap-2">
            <button class="px-2 py-1 rounded bg-slate-700 hover:bg-slate-600 text-sm" onclick="iaEditar(&#39;ec83a641-def2-4db8-b49e-3fbe807112fa&#39;)">Editar</button>
            <button class="px-2 py-1 rounded bg-red-600/80 hover:bg-red-500 text-sm" onclick="iaRemover(&#39;ec83a641-def2-4db8-b49e-3fbe807112fa&#39;)">Remover</button>
          </div>
        </div>
      </div><div class="rounded-xl border border-white/10 p-3 bg-slate-800/50">
        <div class="flex justify-between items-start gap-3">
          <div>
            <div class="font-medium">Login + Leitura Facial (simulado)</div>
            <div class="text-sm text-white/80 mt-1">A leitura facial falhou. O que conferir?</div>
            <div class="text-sm text-white/90 mt-2">Verifique se os utilitÃ¡rios de imagem/hash carregaram antes dos listeners, se a cÃ¢mera estÃ¡ liberada e se a funÃ§Ã£o de fallback estÃ¡ ativa quando a cÃ¢mera nÃ£o existir.</div>
            <div class="text-xs text-white/50 mt-2">Tags: seguranÃ§a, facial, login Â· 10/09/2025, 16:44:46</div>
          </div>
          <div class="flex flex-col gap-2">
            <button class="px-2 py-1 rounded bg-slate-700 hover:bg-slate-600 text-sm" onclick="iaEditar(&#39;c6b1a858-9d88-4846-8ab5-47c4666a7161&#39;)">Editar</button>
            <button class="px-2 py-1 rounded bg-red-600/80 hover:bg-red-500 text-sm" onclick="iaRemover(&#39;c6b1a858-9d88-4846-8ab5-47c4666a7161&#39;)">Remover</button>
          </div>
        </div>
      </div><div class="rounded-xl border border-white/10 p-3 bg-slate-800/50">
        <div class="flex justify-between items-start gap-3">
          <div>
            <div class="font-medium">PWA e tema</div>
            <div class="text-sm text-white/80 mt-1">Como aplicar tema e deixar a experiÃªncia PWA melhor?</div>
            <div class="text-sm text-white/90 mt-2">Inclua &lt;meta name='theme-color'&gt; no head, Ã­cones adequados e registre o service worker para cache offline controlado.</div>
            <div class="text-xs text-white/50 mt-2">Tags: pwa, ui, tema Â· 10/09/2025, 16:44:46</div>
          </div>
          <div class="flex flex-col gap-2">
            <button class="px-2 py-1 rounded bg-slate-700 hover:bg-slate-600 text-sm" onclick="iaEditar(&#39;e0666f76-9419-4d67-b667-dc24b7b2c21b&#39;)">Editar</button>
            <button class="px-2 py-1 rounded bg-red-600/80 hover:bg-red-500 text-sm" onclick="iaRemover(&#39;e0666f76-9419-4d67-b667-dc24b7b2c21b&#39;)">Remover</button>
          </div>
        </div>
      </div></div>

      <hr class="border-white/10">

      <form id="ia-form" class="grid gap-3" onsubmit="iaSalvarItem(event)">
        <h4 class="font-medium">Cadastrar/editar resposta rÃ¡pida</h4>
        <div class="grid md:grid-cols-2 gap-3">
          <div>
            <label class="text-sm">TÃ­tulo</label>
            <input id="ia-titulo" class="w-full px-3 py-2 rounded bg-slate-800 text-white border border-white/10" required="">
          </div>
          <div>
            <label class="text-sm">Tags (separadas por vÃ­rgula)</label>
            <input id="ia-tags" class="w-full px-3 py-2 rounded bg-slate-800 text-white border border-white/10" placeholder="ex.: cadastro, seguranÃ§a, gateway">
          </div>
        </div>
        <div class="grid md:grid-cols-2 gap-3">
          <div>
            <label class="text-sm">Pergunta</label>
            <textarea id="ia-pergunta" rows="3" class="w-full px-3 py-2 rounded bg-slate-800 text-white border border-white/10" required=""></textarea>
          </div>
          <div>
            <label class="text-sm">Resposta</label>
            <textarea id="ia-resposta" rows="3" class="w-full px-3 py-2 rounded bg-slate-800 text-white border border-white/10" required=""></textarea>
          </div>
        </div>

        <div class="flex flex-wrap items-center gap-3">
          <button class="px-4 py-2 rounded bg-emerald-600 hover:bg-emerald-500">Salvar</button>
          <button type="button" class="px-4 py-2 rounded bg-slate-700 hover:bg-slate-600" onclick="iaNovo()">Novo</button>
          <button type="button" class="px-4 py-2 rounded bg-slate-700 hover:bg-slate-600" onclick="iaExportJSON()">Exportar JSON</button>
          <button type="button" class="px-4 py-2 rounded bg-slate-700 hover:bg-slate-600" onclick="iaExportCSV()">Exportar CSV</button>
          <label class="ml-auto text-sm flex items-center gap-2 cursor-pointer">
            <span class="px-3 py-2 rounded bg-slate-700 hover:bg-slate-600">Importar JSON</span>
            <input id="ia-import" type="file" accept="application/json" class="hidden" onchange="iaImportJSON(this)">
          </label>
        </div>
      </form>
    </div>

    <!-- Placeholders para outras abas do seu app -->
    <div id="aba-contrato" class="hidden p-4 rounded-2xl glass">
      <h3 class="text-lg font-semibold">Contrato (placeholder)</h3>
      <p class="text-white/70 text-sm">Integre aqui seu fluxo de contrato automÃ¡tico existente.</p>
    </div>
  
<div id="aba-facial" class="hidden p-4 rounded-2xl glass">
  <h3 class="text-lg font-semibold mb-3">ValidaÃ§Ã£o Facial</h3>
  <p class="text-sm text-white/70 mb-4">Escolha a aÃ§Ã£o:</p>

  <div class="flex gap-4">
    <button onclick="abrirCamera()" class="px-4 py-2 rounded bg-emerald-600 hover:bg-emerald-500">
      ğŸ“¸ Cadastrar Selfie
    </button>

    <button onclick="executarLeituraFacial()" class="px-4 py-2 rounded bg-sky-600 hover:bg-sky-500">
      ğŸ” Executar Leitura Facial
    </button>
  </div>

  <div id="cameraContainer" class="mt-4 hidden">
    <video id="cameraPreview" autoplay playsinline class="rounded-xl border border-white/10"></video>
    <button onclick="capturarFoto()" class="mt-3 px-4 py-2 rounded bg-red-600 hover:bg-red-500">
      Tirar Foto
    </button>
  </div>

  <div id="fotoContainer" class="mt-4 hidden">
    <h4 class="text-sm font-medium mb-2">Foto Capturada:</h4>
    <canvas id="fotoCanvas" class="rounded-xl border border-white/10"></canvas>
  </div>
</div>

</main>



  <div id="cameraContainer" class="mt-4 hidden">
    <video id="cameraPreview" autoplay playsinline class="rounded-xl border border-white/10"></video>
    <button onclick="capturarFoto()" class="mt-3 px-4 py-2 rounded bg-red-600 hover:bg-red-500">
      Tirar Foto
    </button>
  </div>

  <div id="fotoContainer" class="mt-4 hidden">
    <h4 class="text-sm font-medium mb-2">Foto Capturada:</h4>
    <canvas id="fotoCanvas" class="rounded-xl border border-white/10"></canvas>
  </div>
</div>

</main>
<!-- Bottom Nav (tab bar) -->
<nav class="fixed bottom-0 inset-x-0 z-20 bg-slate-900/80 backdrop-blur border-t border-white/10">
<div class="grid grid-cols-7 text-xs">
<button class="py-3 flex flex-col items-center gap-1" onclick="nav('t-home')">ğŸ <span>InÃ­cio</span></button>
<button class="py-3 flex flex-col items-center gap-1" onclick="nav('t-visaogeral')">ğŸ“Š<span>Geral</span></button>
<button class="py-3 flex flex-col items-center gap-1" onclick="nav('t-repasse')">ğŸ”<span>Repasse</span></button>
<button class="py-3 flex flex-col items-center gap-1" onclick="nav('t-reembolsos')">â†”ï¸<span>Reemb.</span></button>
<button class="py-3 flex flex-col items-center gap-1" onclick="openModal('m-gateway')">ğŸ¦<span>Gateway</span></button>
<button class="py-3 flex flex-col items-center gap-1" onclick="nav('t-contrato')">ğŸ“„<span>Contrato</span></button>
<button class="py-3 flex flex-col items-center gap-1" onclick="nav('t-restrito')">ğŸ”’<span>Restrito</span></button>
<button class="py-3 flex flex-col items-center gap-1" onclick="nav('t-ciclos')">ğŸ“…<span>Ciclos Pgto</span></button>
<button class="py-3 flex flex-col items-center gap-1" onclick="nav('t-facial')">ğŸ§‘â€ğŸ¦±<span>Facial</span></button>
<button class="py-3 flex flex-col items-center gap-1" onclick="nav('integracao-bancaria')">ğŸ“Š<span>IntegraÃ§Ã£o BancÃ¡ria</span></button>
</div>
</nav>
<!-- FABs (aÃ§Ãµes rÃ¡pidas) -->
<div class="fixed bottom-24 right-4 flex flex-col gap-2">
<button class="rounded-full px-4 py-3 bg-white/10 backdrop-blur shadow text-xs" onclick="exportarPDF()">Exportar PDF</button>
<button class="rounded-full px-4 py-3 bg-gradient-to-r from-cyan-500 to-indigo-500 shadow text-xs" onclick="gerarOrdem()">Gerar Ordem</button>
</div>
</div>
<!-- Modais -->
<div class="hidden fixed inset-0 bg-black/70 z-30 items-end sm:items-center justify-center" id="m-gateway">
<div class="bg-slate-900 rounded-t-2xl sm:rounded-2xl w-full sm:w-[480px] p-4">
<div class="flex items-center justify-between mb-2">
<h3 class="text-base font-semibold">Gateway BancÃ¡rio</h3>
<button class="text-slate-300" onclick="closeModal('m-gateway')">âœ•</button>
</div>
<p class="text-xs text-slate-400">Clique em um banco para acessar o ambiente seguro:</p>
<div class="grid grid-cols-2 gap-2 mt-3 text-sm">
<a class="rounded-lg bg-white/10 p-3 text-left" href="https://www.bb.com.br" target="_blank">ğŸ¦ Banco do Brasil</a>
<a class="rounded-lg bg-white/10 p-3 text-left" href="https://www.caixa.gov.br" target="_blank">ğŸ¦ Caixa</a>
<a class="rounded-lg bg-white/10 p-3 text-left" href="https://www.itau.com.br" target="_blank">ğŸ¦ ItaÃº</a>
<a class="rounded-lg bg-white/10 p-3 text-left" href="https://banco.bradesco" target="_blank">ğŸ¦ Bradesco</a>
<a class="rounded-lg bg-white/10 p-3 text-left" href="https://www.santander.com.br" target="_blank">ğŸ¦ Santander</a>
<a class="rounded-lg bg-white/10 p-3 text-left" href="https://www.btgpactual.com" target="_blank">ğŸ¦ BTG Pactual</a>
<a class="rounded-lg bg-white/10 p-3 text-left" href="https://www.bancointer.com.br" target="_blank">ğŸ¦ Banco Inter</a>
<a class="rounded-lg bg-white/10 p-3 text-left" href="https://nubank.com.br" target="_blank">ğŸ¦ Nubank</a>
<a class="rounded-lg bg-white/10 p-3 text-left" href="https://www.c6bank.com.br" target="_blank">ğŸ¦ C6 Bank</a>
<a class="rounded-lg bg-white/10 p-3 text-left" href="https://www.jpmorgan.com" target="_blank">ğŸ¦ JP Morgan</a>
<button class="rounded-lg bg-gradient-to-r from-cyan-500 to-indigo-500 p-3 text-left" onclick="openModal('m-cadastro')">ğŸ¦ Infinity Banco Digital</button>

<div id="uploadContainer" class="mt-4">
  <h4 class="text-sm font-medium mb-2">Ou selecione uma foto:</h4>
  <input type="file" id="fotoUpload" accept="image/*" class="mb-3 text-sm">
  <div id="uploadPreview" class="hidden">
    <h4 class="text-sm font-medium mb-2">Foto Selecionada:</h4>
    <img id="uploadImg" class="rounded-xl border border-white/10 max-w-xs"/>
  </div>
</div>

</div>
</div>
</div>
<div class="hidden fixed inset-0 bg-black/70 z-30 items-end sm:items-center justify-center" id="m-ativo">
<div class="bg-slate-900 rounded-t-2xl sm:rounded-2xl w-full sm:w-[460px] p-4">
<div class="flex items-center justify-between mb-2">
<h3 class="text-base font-semibold">TransferÃªncia de Ativo</h3>
<button class="text-slate-300" onclick="closeModal('m-ativo')">âœ•</button>
</div>
<ul class="text-xs space-y-1 text-slate-300">
<li>Assinatura digital com duplo fator</li>
<li>AutorizaÃ§Ã£o multi-administradores</li>
<li>Registro contÃ¡bil e compliance (ANATEL/CADE)</li>
<li>ValidaÃ§Ã£o de titularidade e inexistÃªncia de Ã´nus</li>
</ul>
<button class="mt-3 w-full rounded-lg py-2 bg-gradient-to-r from-fuchsia-500 to-pink-600 text-xs font-semibold" onclick="alert('SolicitaÃ§Ã£o enviada.')">Solicitar TransferÃªncia</button>
</div>
</div>

<!-- Modal Cadastro Infinity Banco Digital -->
<div class="hidden fixed inset-0 bg-black/70 z-40 items-center justify-center" id="m-cadastro">
<div class="bg-slate-900 rounded-2xl w-full max-w-md p-6 overflow-y-auto max-h-[90vh]">
<h3 class="text-base font-semibold mb-2">Cadastro - Infinity Banco Digital</h3>
<button class="absolute top-4 right-4 text-slate-300" onclick="closeModal('m-cadastro')">âœ•</button>
<form class="space-y-2 text-xs" id="cadForm">
<input class="w-full px-3 py-2 rounded bg-slate-800" id="cadNome" placeholder="Nome Completo" required=""/>
<input class="w-full px-3 py-2 rounded bg-slate-800" id="cadCpf" placeholder="CPF" required=""/>
<input class="w-full px-3 py-2 rounded bg-slate-800" required="" type="date"/>
<input class="w-full px-3 py-2 rounded bg-slate-800" id="cadEndereco" placeholder="EndereÃ§o" required=""/>
<input class="w-full px-3 py-2 rounded bg-slate-800" placeholder="CEP" required=""/>
<input class="w-full px-3 py-2 rounded bg-slate-800" placeholder="Telefone Celular" required=""/>
<input class="w-full px-3 py-2 rounded bg-slate-800" placeholder="E-mail" required="" type="email"/>
<input class="w-full px-3 py-2 rounded bg-slate-800" placeholder="Renda Mensal" required=""/>
<select class="w-full px-3 py-2 rounded bg-slate-800" required="">
<option>Uso Pessoal</option>
<option>Empresarial</option>
</select>
<label class="flex items-center space-x-2"><input required="" type="checkbox"/> <span>Aceito os Termos &amp; CondiÃ§Ãµes</span></label>
<label class="flex items-center space-x-2"><input required="" type="checkbox"/> <span>Aceito PolÃ­tica PLD/FT</span></label>
<button class="w-full py-2 bg-gradient-to-r from-cyan-500 to-indigo-500 rounded-lg" onclick="processarCadastro()" type="submit">Enviar Cadastro</button>
<button class="w-full py-2 bg-slate-700 rounded-lg text-white" id="btnContrato" type="button">ğŸ“„ Ler Contrato</button></form>
<p class="hidden text-green-400 text-xs mt-3" id="cadMsg">Cadastro enviado para anÃ¡lise. Sua conta serÃ¡ ativada em atÃ© 48h Ãºteis.</p>
</div>
</div>
<!-- Modal Infinity Banco Digital Login -->
<div class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" id="modalInfinityLogin">
<div class="bg-white text-black rounded-lg shadow-lg w-96 p-6">
<h2 class="text-xl font-bold mb-4">Infinity Banco Digital - Login</h2>
<form id="infinityLoginForm">
<label class="block mb-2">UsuÃ¡rio</label>
<input autocomplete="off" class="w-full border rounded p-2 mb-3" id="infinityUser" placeholder="Digite aqui..." type="text"/>
<label class="block mb-2">Senha</label>
<input autocomplete="off" class="w-full border rounded p-2 mb-3" id="infinityPass" placeholder="Digite aqui..." type="password"/>
<button class="w-full bg-blue-600 text-white rounded p-2" type="submit">Entrar</button>
<p class="text-red-600 text-sm mt-2 hidden" id="loginError">UsuÃ¡rio ou senha invÃ¡lidos</p>
</form>
<div id="faceLoginControls" style="margin-top:12px; display:flex; gap:8px; flex-wrap:wrap;">
  <button id="btnFaceLogin" type="button" style="padding:10px 14px;border:0;border-radius:8px;background:#0d6efd;color:#fff;cursor:pointer;">
    Entrar com Reconhecimento Facial (Simulado)
  </button>
  <button id="btnFaceEnroll" type="button" style="padding:10px 14px;border:0;border-radius:8px;background:#198754;color:#fff;cursor:pointer;">
    Cadastrar/Atualizar Foto de ReferÃªncia
  </button>
  <label style="display:flex;align-items:center;gap:6px;font-size:14px">
    <input id="forceFail" type="checkbox"> ForÃ§ar falha (teste)
  </label>
  <label style="display:flex;align-items:center;gap:6px;font-size:14px">
    Limite de similaridade:
    <input id="threshold" type="number" min="0" max="64" step="1" value="18" style="width:72px;margin-left:6px;">
  </label>
  <div id="faceRequirement" style="font-size:13px;color:#b02a37;display:flex;align-items:center;">âš ï¸ Reconhecimento facial obrigatÃ³rio para entrar.</div>
</div>

<button class="mt-4 w-full bg-gray-400 text-white rounded p-2" onclick="closeInfinityLogin()">Cancelar</button>
</div>
</div>
<!-- Modal de Boas-vindas apÃ³s login -->
<div class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" id="modalInfinityWelcome">
<div class="bg-white text-black rounded-lg shadow-lg w-96 p-6 text-center">
<h2 class="text-xl font-bold mb-4">Bem-vindo ao Infinity Banco Digital</h2>
<p class="mb-4">Acesso liberado ao ambiente seguro do banco.</p>
<button class="bg-green-600 text-white rounded p-2 px-4" onclick="closeInfinityWelcome()">Continuar</button>
</div>
</div>
<div class="hidden fixed inset-0 bg-black/70 z-50 items-center justify-center" id="m-contrato">
<div class="bg-slate-900 rounded-2xl w-full max-w-2xl p-6 overflow-y-auto max-h-[90vh] text-slate-100">
<h3 class="text-lg font-semibold mb-2">Contrato JurÃ­dico</h3>
<button class="absolute top-4 right-4 text-slate-300" onclick="closeModal('m-contrato')">âœ•</button>
<textarea class="w-full h-80 p-3 rounded bg-slate-800 text-xs mb-3" readonly="">CONTRATO DE PRESTAÃ‡ÃƒO DE SERVIÃ‡OS DE TECNOLOGIA E CONTA DIGITAL

Pelo presente instrumento particular, de um lado:
Infinity Fiber Ltda., inscrita no CNPJ sob nÂº 28.430.524/0001-31, com sede na Rua do MÃ©xico, 31 â€” Centro, Rio de Janeiro/RJ, doravante denominada CONTRATADA;

E, de outro lado:
[NOME DO CLIENTE], inscrito no CPF/CNPJ sob nÂº [â—], residente/sediado em [â—], doravante denominado CONTRATANTE;

ClÃ¡usula 1Âª â€” Objeto
A CONTRATADA prestarÃ¡ ao CONTRATANTE os serviÃ§os de desenvolvimento, manutenÃ§Ã£o e suporte do Sistema Mobile (PWA) e disponibilizaÃ§Ã£o de conta digital.

ClÃ¡usula 2Âª â€” VigÃªncia
VigÃªncia inicial de 12 meses, renovÃ¡vel automaticamente.

ClÃ¡usula 3Âª â€” ObrigaÃ§Ãµes da CONTRATADA
a) Cumprir requisitos ANATEL, BACEN e LGPD;
b) Manter confidencialidade;
c) Disponibilizar suporte tÃ©cnico e operacional.

ClÃ¡usula 4Âª â€” ObrigaÃ§Ãµes do CONTRATANTE
a) Fornecer informaÃ§Ãµes corretas;
b) Efetuar pagamentos e tarifas contratadas;
c) Usar conforme legislaÃ§Ã£o e regulamentos.

ClÃ¡usula 5Âª â€” Confidencialidade
As partes comprometem-se a nÃ£o divulgar informaÃ§Ãµes sigilosas.

ClÃ¡usula 6Âª â€” LGPD
A CONTRATADA adotarÃ¡ medidas para proteÃ§Ã£o dos dados pessoais.

ClÃ¡usula 7Âª â€” RescisÃ£o
RescisÃ£o por descumprimento contratual ou a pedido de qualquer das partes.

ClÃ¡usula 8Âª â€” Foro
Fica eleito o foro da Comarca do Rio de Janeiro/RJ.

ClÃ¡usula 9Âª â€” Tarifas de Pacotes de ServiÃ§os
A CONTRATANTE terÃ¡ acesso a pacotes de serviÃ§os digitais, podendo haver cobranÃ§a de tarifas mensais conforme tabela vigente.

ClÃ¡usula 10Âª â€” ManutenÃ§Ã£o da Conta
A manutenÃ§Ã£o da conta digital serÃ¡ gratuita no plano bÃ¡sico, podendo ser cobrada taxa em pacotes superiores escolhidos pelo CONTRATANTE.

ClÃ¡usula 11Âª â€” MovimentaÃ§Ã£o Financeira
O uso da conta digital inclui pagamentos, transferÃªncias e recebimentos, sujeitos a limites de seguranÃ§a e operaÃ§Ã£o definidos pela CONTRATADA.

ClÃ¡usula 12Âª â€” SeguranÃ§a e AutenticaÃ§Ã£o
OperaÃ§Ãµes devem ser confirmadas via senha, token, biometria ou outro meio seguro. O CONTRATANTE deve manter sigilo de suas credenciais.

ClÃ¡usula 13Âª â€” Encerramento de Conta
A conta poderÃ¡ ser encerrada pelo CONTRATANTE ou pela CONTRATADA em casos de descumprimento, inatividade ou ordem legal. Saldos serÃ£o devolvidos em atÃ© 10 dias Ãºteis.

ClÃ¡usula 14Âª â€” Atendimento e Suporte
O suporte serÃ¡ prestado por canais digitais da CONTRATADA em horÃ¡rio comercial, exceto bloqueios emergenciais de conta, disponÃ­veis 24h/dia.

-------------------------------------------------
Infinity Fiber Ltda. â€” CONTRATADA
-------------------------------------------------
[Nome do Cliente] â€” CONTRATANTE
</textarea>
<div class="flex items-center space-x-2 mb-3">
<input class="" id="chkContrato" type="checkbox"/>
<label class="text-sm" for="chkContrato">Li e aceito os termos do contrato</label>
</div>
<button class="hidden w-full py-2 bg-gradient-to-r from-cyan-500 to-indigo-500 rounded-lg text-white" id="btnPdf" onclick="gerarContratoPDF()">Baixar Contrato em PDF</button>
</div>
</div>



<!-- Modal de CÃ¢mera para Reconhecimento Facial (Simulado) -->
<div id="faceModal" style="position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;z-index:9999;">
  <div style="background:#fff;padding:16px;border-radius:12px;max-width:720px;width:95%;box-shadow:0 10px 30px rgba(0,0,0,.2)">
    <h3 style="margin:8px 0 12px 0">Reconhecimento Facial â€” DEMO (Somente SimulaÃ§Ã£o Local)</h3>
    <p style="margin:0 0 8px 0;font-size:14px;color:#555">Este recurso Ã© uma <b>simulaÃ§Ã£o</b> para testes de UX. Nenhum dado Ã© enviado ao servidor.</p><div id="httpsHint" style="display:none;margin:8px 0;padding:8px;border-radius:8px;background:#fff3cd;color:#664d03;font-size:13px;">âš ï¸ Para abrir a cÃ¢mera, o navegador exige <b>HTTPS</b> ou <b>localhost</b>.<br>Abra o arquivo com um servidor local. Exemplo (Python): <code>python -m http.server 8000</code> e acesse <code>http://localhost:8000/</code></div>
    <div style="display:flex;gap:12px;flex-wrap:wrap;">
      <div style="flex:1 1 320px;">
        <video id="faceVideo" autoplay playsinline style="width:100%;border-radius:8px;background:#000"></video>
        <div style="display:flex;gap:8px;margin-top:8px;">
          <button id="btnFaceCapture" type="button" style="padding:8px 12px;border:0;border-radius:8px;background:#0d6efd;color:#fff;cursor:pointer;">Capturar</button>
          <button id="btnFaceClose" type="button" style="padding:8px 12px;border:0;border-radius:8px;background:#6c757d;color:#fff;cursor:pointer;">Cancelar</button>
          <button id="btnFaceUploadCapture" type="button" style="padding:8px 12px;border:0;border-radius:8px;background:#17a2b8;color:#fff;cursor:pointer;">Usar foto no lugar da cÃ¢mera</button>
        </div>
      </div>
      <div style="flex:1 1 320px;">
        <canvas id="snapshot" width="0" height="0" style="width:100%;border-radius:8px;background:#f2f2f2"></canvas>
        <div style="margin-top:8px;font-size:14px;color:#333">
          <div>Similaridade (aHash Î”): <span id="similarity">â€”</span></div>
          <div>Status: <span id="faceStatus">Aguardando capturaâ€¦</span></div>
        </div>
        <details style="margin-top:6px;">
          <summary>Como funciona esta simulaÃ§Ã£o?</summary>
          <p style="font-size:13px;color:#555;margin-top:6px">
            Geramos um <i>aHash</i> (8Ã—8 em escala de cinza) da sua foto de referÃªncia e da captura.
            Comparamos a distÃ¢ncia de Hamming. Valores menores indicam maior similaridade. Use o limite para simular maior/menor rigor.
          </p>
        </details>
      </div>
    </div>
  </div>
</div>

<input id="enrollInput" type="file" accept="image/*" style="display:none">













<!-- Modal Gateway BancÃ¡rio -->
<div id="modal-gateway" class="hidden fixed inset-0 bg-black/70 z-50 items-center justify-center">
  <div class="bg-slate-900 rounded-2xl w-full max-w-lg p-6 text-white">
    <h2 class="text-lg font-semibold mb-3">Gateway BancÃ¡rio</h2>
    <form class="grid gap-3">
      <div>
        <label class="text-sm">Valor</label>
        <input type="number" placeholder="0,00" class="w-full px-3 py-2 rounded bg-slate-800 border border-white/20">
      </div>
      <div>
        <label class="text-sm">Destino (somente contas com permissÃ£o)</label>
        <input type="text" placeholder="Conta destino" class="w-full px-3 py-2 rounded bg-slate-800 border border-white/20">
      </div>
      <div>
        <label class="text-sm">CPF do destinatÃ¡rio</label>
        <input type="text" placeholder="000.000.000-00" class="w-full px-3 py-2 rounded bg-slate-800 border border-white/20">
      </div>
      <div class="flex gap-3 mt-3">
        <button type="submit" class="px-4 py-2 rounded bg-emerald-600 hover:bg-emerald-500">Transferir</button>
        <button type="button" onclick="closeModal('modal-gateway')" class="px-4 py-2 rounded bg-slate-700 hover:bg-slate-600">Fechar</button>
      </div>
    </form>
    <p class="text-xs text-slate-400 mt-3">âš ï¸ Somente contas cadastradas podem receber transferÃªncias. Logs de auditoria recomendados.</p>
  </div>
</div>

<!-- Modal Contas com PermissÃ£o -->
<div id="modal-contas" class="hidden fixed inset-0 bg-black/70 z-50 items-center justify-center overflow-y-auto">
  <div class="bg-slate-900 rounded-2xl w-full max-w-2xl p-6 text-white">
    <h2 class="text-lg font-semibold mb-3">Contas com PermissÃ£o</h2>
    <form class="grid gap-3">
      <input placeholder="Nome completo" class="px-3 py-2 rounded bg-slate-800 border border-white/20">
      <input placeholder="CPF" class="px-3 py-2 rounded bg-slate-800 border border-white/20">
      <input placeholder="RG" class="px-3 py-2 rounded bg-slate-800 border border-white/20">
      <input placeholder="EndereÃ§o" class="px-3 py-2 rounded bg-slate-800 border border-white/20">
      <div class="grid grid-cols-3 gap-2">
        <input placeholder="Banco" class="px-3 py-2 rounded bg-slate-800 border border-white/20">
        <input placeholder="AgÃªncia" class="px-3 py-2 rounded bg-slate-800 border border-white/20">
        <input placeholder="Conta" class="px-3 py-2 rounded bg-slate-800 border border-white/20">
      </div>
      <label class="text-sm">Comprovante de residÃªncia</label>
      <input type="file" accept=".pdf,image/*" class="w-full text-sm">
      <div class="flex gap-3 mt-3">
        <button type="submit" class="px-4 py-2 rounded bg-emerald-600 hover:bg-emerald-500">Salvar</button>
        <button type="button" onclick="closeModal('modal-contas')" class="px-4 py-2 rounded bg-slate-700 hover:bg-slate-600">Fechar</button>
      </div>
    </form>
  </div>
</div>

<!-- Modal Atendimento IA -->
<div id="modal-ia" class="hidden fixed inset-0 bg-black/70 z-50 items-center justify-center overflow-y-auto">
  <div class="bg-slate-900 rounded-2xl w-full max-w-2xl p-6 text-white">
    <h2 class="text-lg font-semibold mb-4">Atendimento IA â€” Autoajuda</h2>
    <div class="space-y-3">
      <details class="bg-slate-800 rounded p-3">
        <summary class="cursor-pointer font-medium">Como abrir uma conta digital?</summary>
        <p class="text-sm mt-2">Preencha o cadastro no mÃ³dulo â€œInfinity Banco Digitalâ€, anexe RG, CPF e comprovante de residÃªncia e aguarde validaÃ§Ã£o em atÃ© 48h Ãºteis.</p>
      </details>
      <details class="bg-slate-800 rounded p-3">
        <summary class="cursor-pointer font-medium">Quais documentos sÃ£o necessÃ¡rios?</summary>
        <p class="text-sm mt-2">RG, CPF, comprovante de residÃªncia atualizado (Ãºltimos 3 meses) e selfie para validaÃ§Ã£o facial.</p>
      </details>
      <details class="bg-slate-800 rounded p-3">
        <summary class="cursor-pointer font-medium">Como funciona a leitura facial?</summary>
        <p class="text-sm mt-2">A leitura facial Ã© obrigatÃ³ria para liberar transferÃªncias e movimentaÃ§Ãµes. Ã‰ rÃ¡pida e feita via cÃ¢mera do celular, garantindo seguranÃ§a.</p>
      </details>
      <details class="bg-slate-800 rounded p-3">
        <summary class="cursor-pointer font-medium">Quais tarifas existem?</summary>
        <p class="text-sm mt-2">Pacote BÃ¡sico: gratuito (PIX ilimitado). IntermediÃ¡rio: R$19,90/mÃªs. Premium: R$39,90/mÃªs (TEDs ilimitados + cartÃ£o fÃ­sico).</p>
      </details>
      <details class="bg-slate-800 rounded p-3">
        <summary class="cursor-pointer font-medium">Como falar com suporte humano?</summary>
        <p class="text-sm mt-2">Atendimento humano em horÃ¡rio comercial via chat do app ou pelo e-mail suporte@infinityfiber.com.</p>
      </details>
    </div>
    <div class="flex justify-end mt-4">
      <button onclick="closeModal('modal-ia')" class="px-4 py-2 rounded bg-slate-700 hover:bg-slate-600">Fechar</button>
    </div>
  </div>
</div>








<script>
// ====== CONFIGURAÃ‡Ã•ES BÃSICAS ======
const CRED_USER = "DanielKascher";
const CRED_PASS = "K@scher123";

// ====== LOGIN ======
function doLogin(){
  const user = document.getElementById('u')?.value?.trim();
  const pass = document.getElementById('p')?.value?.trim();
  const erro = document.getElementById('le');

  if(user === CRED_USER && pass === CRED_PASS){
    document.getElementById('login')?.classList.add('hidden');
    document.getElementById('app')?.classList.remove('hidden');
    // Abre a tela inicial
    try { nav('t-home'); } catch(e) {}
    // Inicializa grÃ¡ficos se existirem
    setTimeout(() => { try { initCharts(); } catch(e) {} }, 50);
    if(erro) erro.classList.add('hidden');
  } else {
    if(erro) erro.classList.remove('hidden');
  }
}

// ====== NAVEGAÃ‡ÃƒO ======
function hideAll(){
  // Esconde todas as sections do conteÃºdo principal
  document.querySelectorAll('#content > section').forEach(s => s.classList.add('hidden'));
  // Esconde a IntegraÃ§Ã£o BancÃ¡ria (fora do #content)
  const integ = document.getElementById('integracao-bancaria');
  if(integ) integ.classList.add('hidden');
}

function nav(id){
  hideAll();
  const alvo = document.getElementById(id);
  if(alvo){
    alvo.classList.remove('hidden');
    // Rola para o topo do container principal se existir
    const cont = document.getElementById('content');
    if(cont){ cont.scrollTop = 0; }
    // Caso esteja abrindo IntegraÃ§Ã£o BancÃ¡ria, rolar tela raiz para topo
    if(id === 'integracao-bancaria'){ window.scrollTo(0,0); }
  }
}

// ====== MOSTRAR/OCULTAR VALORES ======
function toggleValores(){
  const els = document.querySelectorAll('.valorFinanceiro');
  els.forEach(el => {
    const v = el.getAttribute('data-valor') || el.textContent;
    if(el.textContent.includes('*')){
      el.textContent = v.replaceAll('.', ','); // apenas estÃ©tica
    } else {
      el.textContent = '****';
    }
  });
  // Atualiza texto de botÃµes que tenham a classe btnToggleValor (se desejar)
  document.querySelectorAll('.btnToggleValor').forEach(btn => {
    btn.textContent = (btn.textContent.includes('Mostrar') ? 'ğŸ™ˆ Ocultar Valores' : 'ğŸ‘ Mostrar Valores');
  });
}

// ====== MODAIS ======
function openModal(id){
  const el = document.getElementById(id);
  if(!el) return;
  el.classList.remove('hidden');
  el.classList.add('flex');
}
function closeModal(id){
  const el = document.getElementById(id);
  if(!el) return;
  el.classList.add('hidden');
  el.classList.remove('flex');
}

// ====== AÃ‡Ã•ES (PDF / ORDEM) ======
function gerarOrdem(){
  const ordem = {
    referencia: 'IF-' + Date.now(),
    data: new Date().toLocaleString(),
    destino: [
      { entidade: 'ANATEL', valor: 1679600000 },
      { entidade: 'OI S.A.', valor: 1193400000 },
      { entidade: 'Reserva Credores', valor: 3536000000 }
    ],
    total: 6409000000
  };
  const blob = new Blob([JSON.stringify(ordem,null,2)], {type:'application/json'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'ordem_repasse.json';
  a.click();
}

function exportarPDF(){
  if(!window.jspdf){ alert('jsPDF nÃ£o carregado.'); return; }
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  doc.setFontSize(14);
  doc.text('RelatÃ³rio - Infinity Fiber (Mobile)', 14, 16);
  doc.setFontSize(11);
  doc.text('Resumo Fundo: R$ 44.200.000.000', 14, 30);
  doc.text('Total Repasse: R$ 6.409.000.000', 14, 38);
  doc.text('Saldo LÃ­quido: R$ 37.791.000.000', 14, 46);
  doc.text('Repasses:', 14, 62);
  doc.text('ANATEL - R$ 1.679.600.000', 22, 70);
  doc.text('OI S.A. - R$ 1.193.400.000', 22, 78);
  doc.text('Reserva - R$ 3.536.000.000', 22, 86);
  doc.save('relatorio_infinityfiber_mobile.pdf');
}

// Contrato PDFs (fallback simples)
function gerarContratoPDF(){
  if(!window.jspdf){ alert('jsPDF nÃ£o carregado.'); return; }
  const { jsPDF } = window.jspdf;
  const area = document.querySelector("#m-contrato textarea");
  const texto = area ? area.value : "Contrato nÃ£o encontrado.";
  const doc = new jsPDF();
  const linhas = doc.splitTextToSize(texto, 180);
  doc.text(linhas, 15, 20);
  doc.save("Contrato_InfinityFiber.pdf");
}
function gerarContratoPDF2(){
  if(!window.jspdf){ alert('jsPDF nÃ£o carregado.'); return; }
  const { jsPDF } = window.jspdf;
  const area = document.querySelector("#t-contrato textarea");
  const texto = area ? area.value : "Contrato nÃ£o encontrado.";
  const doc = new jsPDF();
  const linhas = doc.splitTextToSize(texto, 180);
  doc.text(linhas, 15, 20);
  doc.save("Contrato_InfinityFiber_Tarifas.pdf");
}

// ====== GRÃFICOS ======
function initCharts(){
  // Pie de Operadoras
  const co = document.getElementById('c-op');
  if(co && window.Chart){
    new Chart(co, {
      type: 'pie',
      data: {
        labels: ['VIVO (24,2 bi)','CLARO (8 bi)','TIM (12 bi)'],
        datasets: [{ data: [24200000000,8000000000,12000000000] }]
      },
      options: { plugins: { legend: { labels: { color: '#e5e7eb', boxWidth: 10, font: { size: 10 } } } } }
    });
  }
  // Pie de Repasse
  const cr = document.getElementById('c-rp');
  if(cr && window.Chart){
    new Chart(cr, {
      type: 'pie',
      data: {
        labels: ['ANATEL 3,8%','OI 2,7%','Reserva 8%'],
        datasets: [{ data: [3.8,2.7,8.0] }]
      },
      options: { plugins: { legend: { labels: { color: '#e5e7eb', boxWidth: 10, font: { size: 10 } } } } }
    });
  }
}

// ====== CÃ‚MERA & FALLBACK UPLOAD ======
let stream;

// Abrir cÃ¢mera para cadastro de selfie (preview)
function abrirCamera() {
  const container = document.getElementById("cameraContainer");
  const video = document.getElementById("cameraPreview");
  const upContainer = document.getElementById("uploadContainer");

  navigator.mediaDevices.getUserMedia({ video: true })
    .then(s => {
      stream = s;
      if(container) container.classList.remove("hidden");
      if(video) video.srcObject = s;
      if(upContainer) upContainer.classList.add("hidden");
    })
    .catch(err => {
      // alert desabilitado, upload jÃ¡ estÃ¡ disponÃ­vel sempre.
      if(upContainer) upContainer.classList.remove("hidden");
    });
}

// Capturar foto da cÃ¢mera (somente preview na tela)
function capturarFoto() {
  const video = document.getElementById("cameraPreview");
  const canvas = document.getElementById("fotoCanvas");
  if(!video || !canvas) return;
  const ctx = canvas.getContext("2d");

  canvas.width = video.videoWidth || 640;
  canvas.height = video.videoHeight || 480;
  ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

  const fotoC = document.getElementById("fotoContainer");
  if(fotoC) fotoC.classList.remove("hidden");

  if(stream){
    stream.getTracks().forEach(track => track.stop());
  }
}

// Executar leitura facial (captura + download)
function executarLeituraFacial() {
  const video = document.getElementById("cameraPreview");
  const container = document.getElementById("cameraContainer");
  const upContainer = document.getElementById("uploadContainer");

  navigator.mediaDevices.getUserMedia({ video: true })
    .then(stream => {
      if(container) container.classList.remove("hidden");
      if(video){
        video.srcObject = stream;
        video.play();
      }
    })
    .catch(() => {
      if(upContainer) upContainer.classList.remove("hidden");
    });
}


// Fallback de upload (prÃ©-visualizaÃ§Ã£o)
document.addEventListener("DOMContentLoaded", () => {
  const uploadInput = document.getElementById("fotoUpload");
  if(uploadInput){
    uploadInput.addEventListener("change", function(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const img = document.getElementById("uploadImg");
          if(img){
            img.src = e.target.result;
            const prev = document.getElementById("uploadPreview");
            if(prev) prev.classList.remove("hidden");
          }
        };
        reader.readAsDataURL(file);
      }
    });
  }
});
</script>


<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('service-worker.js')
      .then(reg => console.log('Service Worker registrado:', reg.scope))
      .catch(err => console.error('Erro ao registrar SW:', err));
  });
}
</script>
</body>

</html>
