<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Transferência • Infinity Fiber</title>
  <link rel="stylesheet" href="style.css"><script defer src="script.js"></script>
</head>
<body onload="ensureAuth()">
  <div class="wrapper">
    <div class="card">
      <div class="toolbar">
        <h1>🔄 Transferência</h1>
        <a class="btn secondary" href="home.html">Voltar</a>
      </div>

      <div id="remetenteBox"></div>
      <div class="toolbar">
        <button class="btn" onclick="buscarCliente()">🔍 Buscar Cliente</button>
        <button class="btn secondary" onclick="go('cadastro.html')">Cadastrar Cliente</button>
      </div>

      <div class="toolbar"><h2>TED/DOC</h2></div>
      <div class="row">
        <div>
          <label>Banco</label>
          <select id="banco"></select>
        </div>
        <div>
          <label>Agência</label>
          <input id="ag" placeholder="0001">
        </div>
      </div>
      <div class="row">
        <div>
          <label>Conta</label>
          <input id="cc" placeholder="123456-7">
        </div>
        <div>
          <label>Favorecido</label>
          <input id="fav" placeholder="Nome completo">
        </div>
      </div>
      <label>Valor</label>
      <input id="valTed" type="number" step="0.01" min="0" placeholder="0,00">
      <button class="btn" onclick="enviarTED()">Confirmar TED/DOC</button>

      <hr/>

      <div class="toolbar"><h2>PIX</h2></div>
      <div class="row">
        <div>
          <label>Tipo de chave</label>
          <select id="tipoPix">
            <option>CPF</option><option>E-mail</option><option>Telefone</option><option>Chave aleatória</option>
          </select>
        </div>
        <div>
          <label>Chave PIX</label>
          <input id="chavePix" placeholder="ex.: 123.456.789-00">
        </div>
      </div>
      <label>Valor</label>
      <input id="valPix" type="number" step="0.01" min="0" placeholder="0,00">
      <button class="btn" onclick="enviarPIX()">Enviar PIX</button>

      <div class="footer small">Saldo atual: <span id="saldoBox"></span></div>
    </div>
  </div>
<script>
  // Remetente
  const ok = renderRemetente('remetenteBox');
  // Preenche bancos
  const sel = document.getElementById('banco'); BANKS.forEach(n=>{ const o=document.createElement('option'); o.textContent=n; sel.appendChild(o); });
  document.getElementById('saldoBox').textContent = fmtBRL(S.saldo);
</script>
</body>
</html>
